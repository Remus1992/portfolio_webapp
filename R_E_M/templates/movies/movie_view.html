{% extends 'base.html' %}

{% load static %}

{% block title %}
    : {{ movie.title }}
{% endblock %}

{% block content %}
    <head>
        <link rel="stylesheet" type="text/css" href="{% static 'styles/style.css' %}"/>
        {#        <link href="{% static 'styles/lightbox.css' %}" rel="stylesheet">#}
        <link rel="stylesheet" type="text/css" href="{% static 'slick-1.8.1/slick/slick.css' %}"/>
        <link rel="stylesheet" type="text/css" href="{% static 'slick-1.8.1/slick/slick-theme.css' %}"/>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    </head>
    <style>
        .poster {
            width: 250px;
        }

        .page_container {
            margin: 20px auto;
            text-align: center;
            width: 50%;
        {#margin: 20px auto;#}{#display: flex;#}{#flex-wrap: wrap;#} align-items: center;
        {#justify-content: center;#}
        }

        pre {
            text-align: left;
            white-space: pre-wrap; /* Since CSS 2.1 */
            white-space: -moz-pre-wrap; /* Mozilla, since 1999 */
            white-space: -pre-wrap; /* Opera 4-6 */
            white-space: -o-pre-wrap; /* Opera 7 */
            word-wrap: break-word; /* Internet Explorer 5.5+ */
        }

        .content_container, .movie_container, .script_container, .album_container {
            width: 100%;
        }

        h1, body {
            font-family: 'Alegreya Sans SC', sans-serif;
            font-weight: bold;
        }

        /* ************* Slick Slide ************** */

        body {
            background-color: #aacccc
        }

        .js .slider-single > div:nth-child(1n+2) {
            display: none
        }

        .js .slider-single.slick-initialized > div:nth-child(1n+2) {
            display: block
        }

        h3 {
            background: #f0f0f0;
            color: #3498db;
            font-size: 2.25rem;
            margin: .5rem;
            padding: 2%;
            position: relative;
            text-align: center;
        }

        .slider-single h3 {
            line-height: 10rem;
        }

        .slider-nav h3::before {
            content: "";
            display: block;
            padding-top: 75%;
        }

        .slider-nav h3 span {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .slider-nav .slick-slide {
            cursor: pointer;
        }

        .slick-slide.is-active h3 {
            color: #c00;
            background-color: #fff
        }

        .slick-slide img {
            margin-left: auto;
            margin-right: auto;
        }

        .center_image {
            width: 100%;
        }

        .preview_image {
            {#height: 100px;#}
            width: 80px;
            margin: 10px;
            vertical-align: middle;
        }

        .slider-nav {
            height: 100px;
            width: auto;
        }

        /******************/
        .script {
            width: 400px;
            height: 700px;
        }

        .poster {
            float: left;
            margin: 20px;
        }
    </style>

    <div class="page_container">
        <div class="content_container">
            {#            <h1><b>{{ movie.title }}</b></h1>#}
            <img src="{{ movie.movie_poster.url }}" alt="{{ movie.alt_text }}" class="poster">
            <br>
            <pre>{{ movie.tag_line }}</pre>
            <br>
            <pre>{{ movie.movie_details }}</pre>
        </div>
        <div class="movie_container">
            {% if movie.youtube %}
                {{ movie.youtube|safe }}
            {% endif %}
        </div>
        <div class="script_container">
            <object class="script" data="{{ movie.movie_script.url }}"></object>
        </div>
        {#        <div class="album_container">#}
        {#            {% for still in movie.movie_photo_album.all %}#}
        {#                <img src="{{ still.image.url }}" alt="{{ still.alt_text }}" class="image">#}
        {##}
        {#                <a href="{{ still.image.url }}" data-lightbox="{{ movie.alt_text }}"#}
        {#                   data-title="{{ still.image_details }}"><img src="{{ still.image.url }}" class="image"></a>#}
        {#            {% endfor %}#}
        {#        </div>#}
               <!--
        <div class="slider slider-single">
            <div><h3>1</h3></div>
            <div><h3>2</h3></div>
            <div><h3>3</h3></div>
            <div><h3>4</h3></div>
            <div><h3>5</h3></div>
            <div><h3>6</h3></div>
            <div><h3>7</h3></div>
            <div><h3>8</h3></div>
            <div><h3>9</h3></div>
            <div><h3>10</h3></div>
        </div>
        <div class="slider slider-nav">
            <div><h3><span>1</span></h3></div>
            <div><h3><span>2</span></h3></div>
            <div><h3><span>3</span></h3></div>
            <div><h3><span>4</span></h3></div>
            <div><h3><span>5</span></h3></div>
            <div><h3><span>6</span></h3></div>
            <div><h3><span>7</span></h3></div>
            <div><h3><span>8</span></h3></div>
            <div><h3><span>9</span></h3></div>
            <div><h3><span>10</span></h3></div>
        </div>
          -->

        <div class="slider slider-single">
            {% for still in movie.movie_photo_album.all %}
                <div><img src="{{ still.image.url }}" class="center_image"></div>
            {% endfor %}
        </div>
        <div class="slider slider-nav">
            {% for still in movie.movie_photo_album.all %}
                <div><img src="{{ still.image.url }}" class="preview_image"></div>
            {% endfor %}
        </div>
    </div>

    </div>

    {#    <script src="{% static 'javascript/lightbox.js' %}"></script>#}
    <script src="{% static 'slick-1.8.1/slick/slick.min.js' %}"></script>

    <script>
        $('.slider-single').slick({
            slidesToShow: 1,
            slidesToScroll: 1,
            arrows: true,
            fade: false,
            adaptiveHeight: true,
            infinite: false,
            useTransform: true,
            speed: 400,
            cssEase: 'cubic-bezier(0.77, 0, 0.18, 1)',
        });

        $('.slider-nav')
            .on('init', function (event, slick) {
                $('.slider-nav .slick-slide.slick-current').addClass('is-active');
            })
            .slick({
                slidesToShow: 7,
                slidesToScroll: 7,
                dots: false,
                focusOnSelect: false,
                infinite: false,
                responsive: [{
                    breakpoint: 1024,
                    settings: {
                        slidesToShow: 5,
                        slidesToScroll: 5,
                    }
                }, {
                    breakpoint: 640,
                    settings: {
                        slidesToShow: 4,
                        slidesToScroll: 4,
                    }
                }, {
                    breakpoint: 420,
                    settings: {
                        slidesToShow: 3,
                        slidesToScroll: 3,
                    }
                }]
            });

        $('.slider-single').on('afterChange', function (event, slick, currentSlide) {
            $('.slider-nav').slick('slickGoTo', currentSlide);
            var currrentNavSlideElem = '.slider-nav .slick-slide[data-slick-index="' + currentSlide + '"]';
            $('.slider-nav .slick-slide.is-active').removeClass('is-active');
            $(currrentNavSlideElem).addClass('is-active');
        });

        $('.slider-nav').on('click', '.slick-slide', function (event) {
            event.preventDefault();
            var goToSingleSlide = $(this).data('slick-index');

            $('.slider-single').slick('slickGoTo', goToSingleSlide);
        });
    </script>
{% endblock %}

{% block footer %}
    {% include 'footer_base.html' %}
{% endblock %}